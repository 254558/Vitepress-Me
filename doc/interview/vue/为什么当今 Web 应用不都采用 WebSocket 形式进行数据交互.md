之前我们也用 WebSocket 做对话和推送，后来全改用 SSE (Server-Send Events, Event-Stream, EventSource)。即便以前用 WebSocket 做对话，发送消息也改成了 POST。一来兼容性更好，一个接口多端都能用；二来发图片、文件处理起来更顺手，就是普通的 HTTP 上传嘛。既然如此，WebSocket 全双功就显得没多少意义了。POST 负责发，SSE 负责收，一样的全双工互不干扰。当然，SSE 也有个缺点，那就是终端断连在服务端不能及时发现。WebSocket 我测试断连立马能触发服务端的 onclose，而 SSE 断连后，输出并不会立即产生异常（java servlet 环境），要等一段时间才行，这个时间貌似跟超时设置相关。主动调接口通知中断虽然能适用特定应用场景，即便关窗口也能在对应事件里调，但起码如果能及时知道断连也好清理掉这个没用的连接。如果您知道什么好的、简单的办法，请评论给我，万分感谢。
